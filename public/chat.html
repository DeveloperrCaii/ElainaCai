<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chat AI - Elaina Assistant</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🤖</text></svg>">
    <style>
        :root {
            --primary-color: #8a2be2;
            --primary-light: #9d4edd;
            --primary-dark: #7b2cbf;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --text-color: #1e293b;
            --text-light: #64748b;
            --border-color: #e2e8f0;
            --user-bubble: #8a2be2;
            --ai-bubble: #f1f5f9;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --code-bg: #1a1a1a;
            --code-text: #f8f8f2;
            --code-line: #343434;
            --success-color: #10b981;
            --error-color: #ef4444;
            --music-bg: rgba(255, 255, 255, 0.95);
            --whatsapp-color: #25d366;
            --telegram-color: #0088cc;
            --developer-color: #dc2626;
        }

        .dark-mode {
            --primary-color: #9d4edd;
            --primary-light: #b185db;
            --primary-dark: #8a2be2;
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-color: #f1f5f9;
            --text-light: #cbd5e1;
            --border-color: #334155;
            --user-bubble: #9d4edd;
            --ai-bubble: #334155;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --code-bg: #1e1e1e;
            --code-text: #d4d4d4;
            --code-line: #2d2d2d;
            --music-bg: rgba(30, 41, 59, 0.95);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: fixed;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            touch-action: pan-x pan-y;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://files.catbox.moe/4zrnsf.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            opacity: 0.15;
            z-index: -1;
            pointer-events: none;
        }

        .dark-mode::before {
            opacity: 0.1;
        }

        /* Prevent zoom on double-tap */
        * {
            -webkit-text-size-adjust: none;
            text-size-adjust: none;
        }

        /* Prevent pull-to-refresh */
        body {
            overscroll-behavior-y: none;
        }

        header {
            background-color: var(--card-bg);
            padding: 0.75rem 1rem;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
            min-height: 60px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex: 1;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .header-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-shrink: 0;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 0.5rem;
            background-color: var(--bg-color);
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            flex-shrink: 0;
        }

        .username {
            font-weight: 600;
            font-size: 0.8rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 80px;
        }

        .user-badge {
            background-color: var(--primary-color);
            color: white;
            padding: 0.2rem 0.4rem;
            border-radius: 0.375rem;
            font-size: 0.7rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .user-badge.developer {
            background-color: var(--developer-color);
        }

        .header-button {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            cursor: pointer;
            font-size: 1rem;
            width: 36px;
            height: 36px;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        .header-button:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow);
        }

        .logout-button {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            width: 100%;
            height: calc(100vh - 120px);
            overflow: hidden;
            z-index: 1;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            min-height: 0;
        }

        /* Custom scrollbar for chat messages */
        .chat-messages::-webkit-scrollbar {
            width: 4px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: var(--bg-color);
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 2px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        .message {
            display: flex;
            max-width: 90%;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            align-self: flex-end;
            margin-left: auto;
        }

        .ai-message {
            align-self: flex-start;
            margin-right: auto;
        }

        .message-bubble {
            padding: 0.75rem 0.875rem;
            border-radius: 1rem;
            box-shadow: var(--shadow);
            line-height: 1.4;
            word-wrap: break-word;
            overflow-wrap: break-word;
            width: fit-content;
            max-width: 100%;
            backdrop-filter: blur(5px);
            border: 1px solid transparent;
        }

        .user-message .message-bubble {
            background: linear-gradient(135deg, var(--user-bubble), var(--primary-light));
            color: white;
            border-bottom-right-radius: 0.25rem;
        }

        .ai-message .message-bubble {
            background-color: var(--ai-bubble);
            color: var(--text-color);
            border-bottom-left-radius: 0.25rem;
            border: 1px solid var(--border-color);
        }

        .message-time {
            font-size: 0.7rem;
            color: var(--text-light);
            margin-top: 0.25rem;
            text-align: right;
            opacity: 0.8;
        }

        .ai-message .message-time {
            text-align: left;
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            background-color: var(--ai-bubble);
            padding: 0.75rem 0.875rem;
            border-radius: 1rem;
            border-bottom-left-radius: 0.25rem;
            box-shadow: var(--shadow);
            backdrop-filter: blur(5px);
            border: 1px solid var(--border-color);
            margin-bottom: 0.5rem;
        }

        .typing-indicator.active {
            display: flex;
        }

        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--text-light);
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-3px); opacity: 1; }
        }

        .input-container {
            display: flex;
            gap: 0.5rem;
            padding: 0.75rem;
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            margin-top: auto;
            backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            flex-shrink: 0;
            min-height: 70px;
            align-items: flex-end;
        }

        .message-input {
            flex: 1;
            padding: 0.75rem 0.875rem;
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            background-color: var(--bg-color);
            color: var(--text-color);
            resize: none;
            outline: none;
            font-size: 0.95rem;
            line-height: 1.4;
            max-height: 100px;
            min-height: 44px;
            transition: all 0.2s;
            font-family: inherit;
            -webkit-user-select: text;
            user-select: text;
        }

        .message-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(138, 43, 226, 0.1);
        }

        .send-button {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            border: none;
            border-radius: 0.75rem;
            padding: 0.75rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            min-width: 44px;
            min-height: 44px;
            flex-shrink: 0;
        }

        .send-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(138, 43, 226, 0.3);
        }

        .send-button:active {
            transform: translateY(0);
        }

        .send-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .welcome-message {
            text-align: center;
            padding: 2rem 1rem;
            color: var(--text-light);
            backdrop-filter: blur(5px);
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 1rem;
            margin: 0.5rem;
            border: 1px solid var(--border-color);
            flex-shrink: 0;
        }

        .dark-mode .welcome-message {
            background-color: rgba(30, 41, 59, 0.8);
        }

        .welcome-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1rem;
            opacity: 0.8;
        }

        .footer {
            text-align: center;
            padding: 0.75rem;
            color: var(--text-light);
            font-size: 0.8rem;
            z-index: 1;
            background-color: var(--card-bg);
            border-top: 1px solid var(--border-color);
            flex-shrink: 0;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Code block styles */
        .code-block {
            margin: 0.5rem 0;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
            border-bottom: 1px solid var(--border-color);
        }

        .code-language {
            font-weight: 600;
            font-family: 'Courier New', monospace;
        }

        .copy-button {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--code-text);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.7rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            transition: all 0.2s;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .copy-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .copy-button.copied {
            background-color: var(--success-color);
            color: white;
        }

        .code-content {
            padding: 0.75rem;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            line-height: 1.4;
            color: var(--code-text);
            white-space: pre-wrap;
            overflow-x: auto;
            background-color: var(--code-bg);
            max-height: 300px;
            overflow-y: auto;
            -webkit-user-select: text;
            user-select: text;
        }

        /* Music player styles */
        .music-player {
            position: fixed;
            bottom: 80px;
            right: 10px;
            background-color: var(--music-bg);
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: var(--shadow);
            width: 300px;
            max-width: calc(100vw - 20px);
            z-index: 1000;
            backdrop-filter: blur(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(100px) scale(0.9);
            opacity: 0;
            pointer-events: none;
            border: 1px solid var(--border-color);
        }

        .music-player.active {
            transform: translateY(0) scale(1);
            opacity: 1;
            pointer-events: all;
        }

        .music-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .music-title {
            font-weight: 700;
            font-size: 1rem;
        }

        .close-button {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            transition: background-color 0.2s;
            flex-shrink: 0;
        }

        .close-button:hover {
            background-color: var(--border-color);
        }

        .track-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .track-cover {
            width: 50px;
            height: 50px;
            border-radius: 0.5rem;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            flex-shrink: 0;
        }

        .track-details {
            flex: 1;
            min-width: 0;
        }

        .track-name {
            font-weight: 700;
            margin-bottom: 0.25rem;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .track-artist {
            font-size: 0.8rem;
            color: var(--text-light);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .music-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            gap: 0.5rem;
        }

        .control-button {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .control-button:hover {
            color: var(--primary-color);
            background-color: var(--border-color);
        }

        .play-button {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(138, 43, 226, 0.3);
            flex-shrink: 0;
        }

        .play-button:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
            color: white;
            transform: scale(1.05);
        }

        .progress-container {
            width: 100%;
            height: 4px;
            background-color: var(--border-color);
            border-radius: 2px;
            cursor: pointer;
            margin-bottom: 0.5rem;
            overflow: hidden;
            flex-shrink: 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s;
        }

        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            color: var(--text-light);
            margin-bottom: 0.75rem;
            flex-shrink: 0;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .volume-slider {
            flex: 1;
            height: 3px;
            background-color: var(--border-color);
            border-radius: 1.5px;
            outline: none;
            -webkit-appearance: none;
            flex-shrink: 1;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Contact panel styles */
        .contact-panel {
            position: fixed;
            bottom: 80px;
            left: 10px;
            background-color: var(--music-bg);
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: var(--shadow);
            width: 280px;
            max-width: calc(100vw - 20px);
            z-index: 1000;
            backdrop-filter: blur(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(100px) scale(0.9);
            opacity: 0;
            pointer-events: none;
            border: 1px solid var(--border-color);
        }

        .contact-panel.active {
            transform: translateY(0) scale(1);
            opacity: 1;
            pointer-events: all;
        }

        .contact-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .contact-title {
            font-weight: 700;
            font-size: 1rem;
        }

        .contact-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 0.75rem;
            transition: all 0.2s;
            cursor: pointer;
            text-decoration: none;
            color: var(--text-color);
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            min-height: 60px;
        }

        .contact-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
            background-color: var(--card-bg);
        }

        .contact-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: white;
            flex-shrink: 0;
        }

        .whatsapp-icon {
            background: linear-gradient(135deg, var(--whatsapp-color), #128C7E);
        }

        .telegram-icon {
            background: linear-gradient(135deg, var(--telegram-color), #0077B5);
        }

        .channel-icon {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
        }

        .contact-info {
            flex: 1;
            min-width: 0;
        }

        .contact-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .contact-description {
            font-size: 0.75rem;
            color: var(--text-light);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Clear chat button */
        .clear-chat-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: var(--error-color);
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
            z-index: 10;
        }

        .clear-chat-button:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }

        /* No messages state */
        .no-messages {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-light);
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .no-messages-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .no-messages-text {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .no-messages-subtext {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        @media (max-width: 768px) {
            .chat-container {
                height: calc(100vh - 110px);
            }
            
            .message {
                max-width: 95%;
            }
            
            .header-controls {
                gap: 0.25rem;
            }
            
            .user-info {
                padding: 0.25rem 0.375rem;
            }
            
            .username {
                display: none;
            }
            
            .input-container {
                padding: 0.5rem;
                min-height: 60px;
                align-items: center;
            }
            
            .message-input {
                min-height: 40px;
                padding: 0.5rem 0.75rem;
                height: 40px;
            }
            
            .send-button {
                min-width: 40px;
                min-height: 40px;
                padding: 0.5rem;
            }
            
            .music-player {
                width: calc(100% - 20px);
                right: 10px;
                left: 10px;
                bottom: 70px;
            }
            
            .contact-panel {
                width: calc(100% - 20px);
                left: 10px;
                bottom: 70px;
            }
            
            .welcome-message {
                padding: 1.5rem 0.75rem;
                margin: 0.25rem;
            }
            
            .welcome-title {
                font-size: 1.3rem;
            }
            
            .footer {
                padding: 0.5rem;
                min-height: 40px;
                font-size: 0.75rem;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 0.5rem 0.75rem;
                min-height: 50px;
            }
            
            .logo-text {
                font-size: 1rem;
            }
            
            .logo-icon {
                width: 28px;
                height: 28px;
                font-size: 0.9rem;
            }
            
            .header-button {
                width: 32px;
                height: 32px;
                font-size: 0.9rem;
            }
            
            .chat-messages {
                padding: 0.5rem;
            }
            
            .message {
                max-width: 98%;
            }
            
            .message-bubble {
                padding: 0.5rem 0.75rem;
                font-size: 0.9rem;
            }
            
            .chat-container {
                height: calc(100vh - 100px);
            }
            
            .input-container {
                padding: 0.5rem;
                min-height: 55px;
                align-items: center;
            }
            
            .message-input {
                min-height: 38px;
                padding: 0.5rem 0.75rem;
                height: 38px;
            }
            
            .send-button {
                min-width: 38px;
                min-height: 38px;
                padding: 0.5rem;
            }
        }

        /* Landscape orientation support */
        @media (max-height: 500px) and (orientation: landscape) {
            .chat-container {
                height: calc(100vh - 80px);
            }
            
            header {
                min-height: 50px;
                padding: 0.5rem;
            }
            
            .footer {
                min-height: 30px;
                padding: 0.25rem;
            }
            
            .input-container {
                min-height: 45px;
                padding: 0.5rem;
                align-items: center;
            }
            
            .message-input {
                min-height: 35px;
                padding: 0.5rem 0.75rem;
                height: 35px;
            }
            
            .send-button {
                min-width: 35px;
                min-height: 35px;
                padding: 0.5rem;
            }
        }

        /* Very small screens */
        @media (max-height: 400px) {
            .input-container {
                min-height: 40px;
                padding: 0.4rem;
                align-items: center;
            }
            
            .message-input {
                min-height: 32px;
                padding: 0.4rem 0.6rem;
                height: 32px;
                font-size: 0.85rem;
            }
            
            .send-button {
                min-width: 32px;
                min-height: 32px;
                padding: 0.4rem;
            }
            
            .send-button svg {
                width: 14px;
                height: 14px;
            }
        }

        /* Prevent text selection on most elements */
        .logo, .user-info, .header-button, .message-time, .typing-indicator, .contact-item, .music-controls {
            -webkit-user-select: none;
            user-select: none;
        }

        /* Allow text selection only in message bubbles and code blocks */
        .message-bubble, .code-content, .message-input {
            -webkit-user-select: text;
            user-select: text;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">E</div>
            <div class="logo-text">Elaina Assistant</div>
        </div>
        <div class="header-controls">
            <div class="user-info">
                <span class="username" id="usernameDisplay">Loading...</span>
                <span class="user-badge" id="userBadge">User</span>
            </div>
            <button class="header-button contact-toggle" id="contactToggle" title="Kontak Developer">📞</button>
            <button class="header-button music-toggle" id="musicToggle" title="Pemutar Musik">🎵</button>
            <button class="header-button theme-toggle" id="themeToggle" title="Toggle Theme">🌙</button>
            <button class="header-button logout-button" id="logoutButton" title="Logout">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </header>

    <div class="chat-container">
        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <div class="welcome-title">Halo! Saya Elaina, asisten AI Anda 🧠</div>
                <div class="welcome-subtitle">Silakan tanyakan apa saja yang ingin Anda ketahui. Saya di sini untuk membantu!</div>
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>

        <div class="input-container">
            <textarea class="message-input" id="messageInput" placeholder="Ketik pesan Anda di sini..." rows="1"></textarea>
            <button class="send-button" id="sendButton" title="Kirim Pesan">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>

    <div class="footer">
        <div>© 2023 Elaina Assistant - Dibuat dengan ❤️ oleh Developer</div>
    </div>

    <!-- Music Player -->
    <div class="music-player" id="musicPlayer">
        <div class="music-header">
            <div class="music-title">Pemutar Musik</div>
            <button class="close-button" id="closeMusicPlayer">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="track-info">
            <img src="https://files.catbox.moe/4zrnsf.jpeg" alt="Track Cover" class="track-cover">
            <div class="track-details">
                <div class="track-name">Elaina's Theme</div>
                <div class="track-artist">AI Assistant</div>
            </div>
        </div>
        <div class="music-controls">
            <button class="control-button" id="prevButton">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 20L9 12L19 4V20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5 19V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button class="control-button play-button" id="playButton">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="playIcon">
                    <path d="M5 3L19 12L5 21V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button class="control-button" id="nextButton">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 4L15 12L5 20V4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M19 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="progress-container" id="progressContainer">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="time-info">
            <span id="currentTime">0:00</span>
            <span id="duration">0:00</span>
        </div>
        <div class="volume-control">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11 5L6 9H2V15H6L11 19V5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M19.07 4.93C20.9447 6.80528 21.9979 9.34836 21.9979 12C21.9979 14.6516 20.9447 17.1947 19.07 19.07" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M15.54 8.46C16.4774 9.39764 17.004 10.6692 17.004 12C17.004 13.3308 16.4774 14.6024 15.54 15.54" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input type="range" min="0" max="100" value="50" class="volume-slider" id="volumeSlider">
        </div>
    </div>

    <!-- Contact Panel -->
    <div class="contact-panel" id="contactPanel">
        <div class="contact-header">
            <div class="contact-title">Hubungi Developer</div>
            <button class="close-button" id="closeContactPanel">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="contact-list">
            <a href="https://wa.me/6281234567890" target="_blank" class="contact-item">
                <div class="contact-icon whatsapp-icon">📱</div>
                <div class="contact-info">
                    <div class="contact-name">WhatsApp</div>
                    <div class="contact-description">Chat langsung dengan developer</div>
                </div>
            </a>
            <a href="https://t.me/developer_elaina" target="_blank" class="contact-item">
                <div class="contact-icon telegram-icon">✈️</div>
                <div class="contact-info">
                    <div class="contact-name">Telegram</div>
                    <div class="contact-description">Kirim pesan melalui Telegram</div>
                </div>
            </a>
            <a href="https://t.me/elaina_assistant" target="_blank" class="contact-item">
                <div class="contact-icon channel-icon">📢</div>
                <div class="contact-info">
                    <div class="contact-name">Channel Updates</div>
                    <div class="contact-description">Ikuti update terbaru Elaina</div>
                </div>
            </a>
        </div>
    </div>

    <script>
        // DOM Elements
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const themeToggle = document.getElementById('themeToggle');
        const logoutButton = document.getElementById('logoutButton');
        const musicToggle = document.getElementById('musicToggle');
        const contactToggle = document.getElementById('contactToggle');
        const musicPlayer = document.getElementById('musicPlayer');
        const contactPanel = document.getElementById('contactPanel');
        const closeMusicPlayer = document.getElementById('closeMusicPlayer');
        const closeContactPanel = document.getElementById('closeContactPanel');
        const playButton = document.getElementById('playButton');
        const playIcon = document.getElementById('playIcon');
        const progressBar = document.getElementById('progressBar');
        const progressContainer = document.getElementById('progressContainer');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const volumeSlider = document.getElementById('volumeSlider');
        const usernameDisplay = document.getElementById('usernameDisplay');
        const userBadge = document.getElementById('userBadge');

        // State variables
        let isDarkMode = localStorage.getItem('darkMode') === 'true';
        let isPlaying = false;
        let currentTime = 0;
        let duration = 180; // 3 minutes in seconds
        let progressInterval;

        // Initialize the app
        function init() {
            applyTheme();
            setupEventListeners();
            loadUserInfo();
            autoResizeTextarea();
        }

        // Apply theme based on user preference
        function applyTheme() {
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
            } else {
                document.body.classList.remove('dark-mode');
                themeToggle.textContent = '🌙';
            }
            localStorage.setItem('darkMode', isDarkMode);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Logout button
            logoutButton.addEventListener('click', handleLogout);
            
            // Send message
            sendButton.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Auto-resize textarea
            messageInput.addEventListener('input', autoResizeTextarea);
            
            // Music player controls
            musicToggle.addEventListener('click', () => togglePanel(musicPlayer));
            contactToggle.addEventListener('click', () => togglePanel(contactPanel));
            closeMusicPlayer.addEventListener('click', () => togglePanel(musicPlayer, false));
            closeContactPanel.addEventListener('click', () => togglePanel(contactPanel, false));
            
            // Play/pause button
            playButton.addEventListener('click', togglePlay);
            
            // Progress bar
            progressContainer.addEventListener('click', setProgress);
            
            // Volume control
            volumeSlider.addEventListener('input', setVolume);
            
            // Close panels when clicking outside
            document.addEventListener('click', (e) => {
                if (!musicPlayer.contains(e.target) && !musicToggle.contains(e.target)) {
                    togglePanel(musicPlayer, false);
                }
                if (!contactPanel.contains(e.target) && !contactToggle.contains(e.target)) {
                    togglePanel(contactPanel, false);
                }
            });
        }

        // Toggle theme
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            applyTheme();
        }

        // Handle logout
        function handleLogout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                alert('Anda telah logout dari Elaina Assistant');
                // In a real app, you would redirect to login page or clear session
            }
        }

        // Send message function
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Add user message to chat
            addMessage(message, 'user');
            messageInput.value = '';
            autoResizeTextarea();

            // Show typing indicator
            showTypingIndicator();

            // Simulate AI response after a delay
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateAIResponse(message);
                addMessage(response, 'ai');
            }, 1500);
        }

        // Add message to chat
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'message-bubble';
            
            // Check if message contains code
            if (text.includes('```')) {
                const parts = text.split('```');
                let content = '';
                
                for (let i = 0; i < parts.length; i++) {
                    if (i % 2 === 0) {
                        // Regular text
                        content += parts[i];
                    } else {
                        // Code block
                        const codeLines = parts[i].split('\n');
                        const language = codeLines[0] || 'code';
                        const codeContent = codeLines.slice(1).join('\n');
                        
                        content += `
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-language">${language}</span>
                                    <button class="copy-button" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <div class="code-content">${escapeHtml(codeContent)}</div>
                            </div>
                        `;
                    }
                }
                
                bubbleDiv.innerHTML = content;
            } else {
                bubbleDiv.textContent = text;
            }
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = getCurrentTime();
            
            messageDiv.appendChild(bubbleDiv);
            messageDiv.appendChild(timeDiv);
            
            // Remove welcome message if it exists
            const welcomeMessage = chatMessages.querySelector('.welcome-message');
            if (welcomeMessage) {
                welcomeMessage.remove();
            }
            
            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Copy code to clipboard
        function copyCode(button) {
            const codeContent = button.closest('.code-block').querySelector('.code-content').textContent;
            navigator.clipboard.writeText(codeContent).then(() => {
                button.textContent = '✅ Copied!';
                setTimeout(() => {
                    button.textContent = '📋 Copy';
                }, 2000);
            });
        }

        // Show typing indicator
        function showTypingIndicator() {
            typingIndicator.classList.add('active');
            scrollToBottom();
        }

        // Hide typing indicator
        function hideTypingIndicator() {
            typingIndicator.classList.remove('active');
        }

        // Scroll to bottom of chat
        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Get current time in HH:MM format
        function getCurrentTime() {
            const now = new Date();
            return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
        }

        // Auto-resize textarea
        function autoResizeTextarea() {
            messageInput.style.height = 'auto';
            messageInput.style.height = Math.min(messageInput.scrollHeight, 100) + 'px';
        }

        // Toggle panel (music player or contact panel)
        function togglePanel(panel, forceState) {
            const isActive = panel.classList.contains('active');
            const shouldActivate = forceState !== undefined ? forceState : !isActive;
            
            if (shouldActivate) {
                panel.classList.add('active');
            } else {
                panel.classList.remove('active');
            }
        }

        // Toggle play/pause
        function togglePlay() {
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                // Change icon to pause
                playIcon.innerHTML = '<path d="M6 4H10V20H6V4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 4H18V20H14V4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
                
                // Start progress simulation
                startProgress();
            } else {
                // Change icon to play
                playIcon.innerHTML = '<path d="M5 3L19 12L5 21V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
                
                // Stop progress simulation
                stopProgress();
            }
        }

        // Start progress simulation
        function startProgress() {
            clearInterval(progressInterval);
            progressInterval = setInterval(() => {
                if (currentTime < duration) {
                    currentTime++;
                    updateProgress();
                } else {
                    // Song ended
                    isPlaying = false;
                    togglePlay();
                    currentTime = 0;
                    updateProgress();
                }
            }, 1000);
        }

        // Stop progress simulation
        function stopProgress() {
            clearInterval(progressInterval);
        }

        // Update progress bar and time
        function updateProgress() {
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            
            // Update time display
            currentTimeEl.textContent = formatTime(currentTime);
            durationEl.textContent = formatTime(duration);
        }

        // Set progress based on click position
        function setProgress(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const percent = clickX / width;
            
            currentTime = percent * duration;
            updateProgress();
        }

        // Set volume
        function setVolume() {
            const volume = volumeSlider.value;
            // In a real app, you would set the audio volume here
        }

        // Format time in MM:SS
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Load user info
        function loadUserInfo() {
            // In a real app, you would fetch this from your backend
            const username = "Pengguna Elaina";
            const badge = "Premium";
            
            usernameDisplay.textContent = username;
            userBadge.textContent = badge;
            
            // Add special class for developer badge
            if (badge === "Developer") {
                userBadge.classList.add('developer');
            }
        }

        // Generate AI response (simulated)
        function generateAIResponse(userMessage) {
            const responses = [
                "Saya memahami pertanyaan Anda. Berdasarkan pengetahuan saya, berikut adalah penjelasannya...",
                "Itu pertanyaan yang bagus! Mari kita bahas lebih detail...",
                "Saya dapat membantu Anda dengan itu. Berikut adalah informasi yang Anda butuhkan...",
                "Terima kasih atas pertanyaannya. Berdasarkan data yang saya miliki...",
                "Saya mengerti apa yang Anda tanyakan. Ini adalah penjelasan yang dapat saya berikan...",
                "Pertanyaan yang menarik! Mari kita eksplorasi jawabannya bersama-sama...",
                "Saya senang Anda bertanya tentang ini. Berikut adalah pandangan saya...",
                "Berdasarkan analisis saya, inilah yang dapat saya sampaikan...",
                "Itu topik yang penting. Mari kita lihat penjelasannya...",
                "Saya punya informasi tentang itu. Berikut adalah penjelasan lengkapnya..."
            ];
            
            // Simple keyword-based responses
            if (userMessage.toLowerCase().includes('halo') || userMessage.toLowerCase().includes('hai')) {
                return "Halo! Senang bertemu dengan Anda. Ada yang bisa saya bantu hari ini?";
            } else if (userMessage.toLowerCase().includes('terima kasih')) {
                return "Sama-sama! Senang bisa membantu. Jika ada pertanyaan lain, jangan ragu untuk bertanya!";
            } else if (userMessage.toLowerCase().includes('nama')) {
                return "Nama saya Elaina, asisten AI yang siap membantu Anda dengan berbagai pertanyaan dan tugas!";
            } else if (userMessage.toLowerCase().includes('buat kode') || userMessage.toLowerCase().includes('program')) {
                return `Tentu, saya bisa membantu Anda dengan pemrograman. Berikut adalah contoh kode sederhana:

\`\`\`javascript
// Program Hallo World dalam JavaScript
function sapa(nama) {
    return "Halo, " + nama + "! Selamat belajar pemrograman.";
}

// Contoh penggunaan
console.log(sapa("Elaina"));
\`\`\`

Kode di atas adalah fungsi sederhana untuk menyapa pengguna. Anda bisa menyesuaikannya sesuai kebutuhan!`;
            }
            
            // Default random response
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
